{"version":3,"file":"index.js","sources":["../../src/signature/index.js"],"sourcesContent":["/**\n * 签名模块\n * @module libs/signature\n */\nimport moment from 'moment';\nimport MD5 from 'js-md5';\nimport qs from 'qs';\n\nfunction object2Query(params) {\n    return Object.keys(params)\n        .map(function (key) {\n            return key + '=' + encodeURIComponent(params[key]);\n        })\n        .join('&');\n}\n\n/**\n * 签名函数\n * @author 吴丞稷 <wuchengji@meeruu.com>\n * @param {object} data 请求参数\n * @param {method} method 请求方法\n * @returns {string} 签名结果\n */\nfunction signature(data = {}, method = 'get') {\n    // 添加签名\n    let encryptionData = '';\n    let date = `&date=${moment().format('YYYYMMDD')}`;\n    if (method === 'get') {\n        // 空对象\n        if (!data || JSON.stringify(data) === '{}') {\n            // 如果没有参数则是字符串加时间\n            encryptionData = `hsjkak1200~@34455abcdefghijklmnopqrstuvwxyzZABHJKLS./@<?>sdtkan${date}`;\n        } else {\n            // 有参数就是参数+时间\n            encryptionData = decodeURIComponent(object2Query(data)) + date;\n        }\n    } else {\n        encryptionData = JSON.stringify(data) + date;\n    }\n    return MD5(encryptionData);\n}\n\nexport default signature;\n"],"names":["object2Query","params","Object","keys","map","key","encodeURIComponent","join","signature","data","method","encryptionData","date","moment","format","JSON","stringify","decodeURIComponent","MD5"],"mappings":"wNAIA,SAISA,aAAaC,UACXC,OAAOC,KAAKF,GACdG,IAAI,SAAUC,UACJA,EAAM,IAAMC,mBAAmBL,EAAOI,MAEhDE,KAAK,KAUd,SAASC,gBAAUC,yDAAO,GAAIC,yDAAS,MAE/BC,EAAiB,GACjBC,kBAAgBC,SAASC,OAAO,oBAQ5BH,EAPO,QAAXD,EAEKD,GAAiC,OAAzBM,KAAKC,UAAUP,GAKPQ,mBAAmBjB,aAAaS,IAASG,2EAHyBA,GAMtEG,KAAKC,UAAUP,GAAQG,EAErCM,IAAIP"}